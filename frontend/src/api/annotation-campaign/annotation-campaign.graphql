query listCampaigns(
    $search: String
    $filter_isArchived: Boolean
    $filter_phase: AnnotationPhaseType
    $filter_ownerID: ID
    $filter_annotatorID: ID
) {
    allAnnotationCampaigns(
        isArchived: $filter_isArchived
        phases_Phase: $filter_phase
        ownerId: $filter_ownerID
        phases_AnnotationFileRanges_AnnotatorId: $filter_annotatorID
        search: $search

        orderBy: "name"
    ) {
        results {
            id
            name
            deadline
            isArchived
            datasetName
            phases {
                results {
                    phase
                }
            }
            tasksCount
            completedTasksCount
            userTasksCount
            userCompletedTasksCount
        }
    }
}

query getCampaign($id: ID!) {
    annotationCampaignById(id: $id) {
        id
        name
        createdAt
        instructionsUrl
        deadline
        isArchived
        canManage
        allowPointAnnotation
        allowColormapTuning
        allowImageTuning
        colormapDefault
        colormapInvertedDefault
        dataset {
            id
            name
        }
        labelSet {
            id
            name
            description
            labels {
                id
                name
            }
        }
        labelsWithAcousticFeatures {
            id
            name
        }
        owner {
            id
            displayName
            email
        }
        description
        archive {
            date
            byUser {
                displayName
            }
        }
        confidenceSet {
            id
            name
            desc
            confidenceIndicators {
                label
                isDefault
            }
        }
        detectors {
            id
            name
        }
        annotators {
            id
            displayName
        }
        analysis {
            edges {
                node {
                    id
                    name
                    colormap {
                        name
                    }
                    fft {
                        nfft
                        windowSize
                        overlap
                        samplingFrequency
                    }
                    legacyConfiguration {
                        scaleName
                        zoomLevel
                        linearFrequencyScale {
                            ratio
                            minValue
                            maxValue
                        }
                        multiLinearFrequencyScale {
                            innerScales {
                                ratio
                                minValue
                                maxValue
                            }
                        }
                    }
                    legacy
                }
            }
        }
        spectrogramsCount
        phases {
            results {
                id
                phase
                isOpen
                tasksCount
                completedTasksCount
            }
        }
    }
}

mutation createCampaign(
    $name: String!
    $description: String
    $instructionsUrl: String
    $deadline: Date
    $allowImageTuning: Boolean
    $allowColormapTuning: Boolean
    $colormapDefault: String
    $colormapInvertedDefault: Boolean
    $datasetID: ID!
    $analysisIDs: [ID]!
) {
    createAnnotationCampaign(input: {
        name: $name
        description: $description
        instructionsUrl: $instructionsUrl
        deadline: $deadline
        allowImageTuning: $allowImageTuning
        allowColormapTuning: $allowColormapTuning
        colormapDefault: $colormapDefault
        colormapInvertedDefault: $colormapInvertedDefault
        dataset: $datasetID
        analysis: $analysisIDs
    }) {
        annotationCampaign {
            id
            dataset {
                path
            }
        }
        errors {
            field
            messages
        }
    }
}

mutation archiveCampaign($id: ID!) {
    archiveAnnotationCampaign(id: $id) {
        ok
    }
}

mutation updateCampaignFeaturedLabels(
    $id: ID!
    $labelsWithAcousticFeatures: [ID]!
    $labelSetID: ID!
    $confidenceSetID: ID
    $allowPointAnnotation: Boolean!
) {
    updateAnnotationCampaign(input: {
        id: $id
        allowPointAnnotation: $allowPointAnnotation
        labelsWithAcousticFeatures: $labelsWithAcousticFeatures
        labelSet: $labelSetID
        confidenceSet: $confidenceSetID
    }) {
        errors {
            field
            messages
        }
    }
}
